### Системная конфигурация
Microsoft Windows [Version 10.0.19045.3803]

AMD Ryzen 5 2600X Six-Core Processor

vCPU - 1

RAM - 4GB

Рассмотрена задача классификации на примере датасета Ирисов Фишера (Iris Dataset).

Ирисы Фишера состоят из данных о 150 экземплярах ириса, по 50 экземпляров из трёх видов. Для каждого экземпляра измерялись четыре характеристики:

1) Длина наружной доли околоцветника;

2) Ширина наружной доли околоцветника;

3) Длина внутренней доли околоцветника;

4) Ширина внутренней доли околоцветника.

В качестве обучаемой модели выступает простой классификатор с тремя линейными полносвязными слоями.

### Дерево model репозитория

    triton/model_repository
    └── simple_model
        └── 1


### Метрики до оптимизаций

    Throughput: 5532.16 infer/sec
    Avg latency: 903 usec (standard deviation 6006 usec)
    p50 latency: 323 usec
    p90 latency: 385 usec
    p95 latency: 422 usec
    p99 latency: 611 usec


### Метрики после оптимизаций

    Throughput: 6527.21 infer/sec
    Avg latency: 765 usec (standard deviation 3028 usec)
    p50 latency: 494 usec
    p90 latency: 540 usec
    p95 latency: 569 usec
    p99 latency: 721 usec


### Мотивация выбора




При увеличении кол-ва instance'ов как latency так и throughput ухудшались, поэтому было решено оставить 1 instance.
Далее был проведен перебор параметра max_queue_delay_microseconds, лучший throughput был достигнут при delay 75 мкс.
При этом значения latency не слишком сильно ухудшились по сравнению со значениями до оптимизации. (p50: 323 -> 494; p99: 611 -> 721)



Основные эксперименты:

| count |  delay | p99 latency | p50 latency | throughput |
|:-----:|:------:|:-----------:|:-----------:|:--------:|
|  1,00 | 100,00 |    779,00   |    529,00   |  5827.41 |
|  2,00 | 100,00 |    809,00   |    534,00   |  5755.87 |
|  4,00 | 100,00 |    882,00   |    540,00   |  5645.23 |
|  8,00 | 100,00 |    846,00   |    546,00   |  5589.14 |
|  1,00 | 500,00 |   1051,00   |    912,00   |  5439.45 |
|  2,00 | 500,00 |   1263,00   |    951,00   |  5134.67 |
|  1,00 |  50,00 |   1035,00   |    484,00   |  5866.72 |
|  2,00 |  50,00 |   48146,00  |    488,00   |  4939.23 |
|  1,00 |  75,00 |    721,00   |    494,00   |  6527.21 |




Метод для экспорта модели: ml_ops.serving_utils.export_to_onnx

Метод для тестирования: ml_ops.triton_client.main
